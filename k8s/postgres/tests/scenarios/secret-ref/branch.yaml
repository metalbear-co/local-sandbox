apiVersion: dbs.mirrord.metalbear.co/v1alpha1
kind: PgBranchDatabase
metadata:
  name: pg-test-branch-secret-ref
  namespace: test-mirrord
spec:
  id: secret-ref
  ttlSecs: 3600
  postgresVersion: "17"
  target:
    pod: pg-server-secret-ref
    container: app
  connectionSource:
    url:
      env:
        container: app
        variable: DATABASE_URL
  copy:
    mode: schema
    tables:
      users:
        filter: "age > 18"
      orders:
        filter: "amount > 50"

